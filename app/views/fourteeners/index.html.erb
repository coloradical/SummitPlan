<!DOCTYPE html>
<html>

	<head>
		<%= include_gon(:init => true) %>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		<meta charset="utf-8">
		<style>
		  /* Always set the map height explicitly to define the size of the div
		   * element that contains the map. */

		  header {
			background: #081723; 
			line-spacing:11px; 
			color:white; 
			font-family:"Futura";
}
		  /* Optional: Makes the sample page fill the window. */
		  html {
			height: 100%;
			margin: 0;
			padding-left: 0px;
			font-family: "futura";

		  }

		  body{
		  	background: linear-gradient(to bottom, #081723 71%, #ffffff 133%); 
			font-family:"Futura"; 
			color: black;
		  	height: 100%;
		  	width: 1500px;
		  }

		  #sidebar {
			background: black;
			width: 350px;
			display: block;
			position: absolute;
			height: 600px;
			top: 250px;	
		
		}

		#firstHeading, #bodyContent {
			
			font-family: "Futura";
			color: black;
			text-align: center;
		}

		#map {
			height: 70%;
			width: 80%;
			padding-left: 1500px;
		  }


		</style>
	</head>
	<body>

	<!Navigation Bar>


		<div class="flex-container">
				<header>
					<img src="https://github.com/elliotwhitehead/SummitPlan/blob/design/resizedWhiteLogo.png?raw=true" align="left">
					
					<br>
					<h1 style="font-size: 32px; padding-left: 30%;">The perfect tool for summitting Colorado's 14,000 foot peaks.</h1>
					<br>
					<br>
					<svg width="100%" height="70">
				  		<rect width="100%" height="1000" style="fill:black" />
						  <text x="5%" y="45" font-family="Futura" font-size="20" fill="white">Fourteener Search</text>
						  <text x="30%" y="45" font-family="Futura" font-size="25" fill="white">&#9830</text>
						  <text x="40%" y="45" font-family="Futura" font-size="20" fill="white">Fourteener Profiles</text>
						  <text x="65%" y="45" font-family="Futura" font-size="25" fill="white">&#9830</text>
						  <text x="75%" y="45" font-family="Futura" font-size="20" fill="white">About the Makers</text>
					</svg>
				</header>
			</div>

	<!--Header-->


		<div id="map"></div>
		<script>
			function initMap() {
			var markers = []; //array of markers
			var castle = {lat: 39.180945, lng:-107.2416232};
			var map = new google.maps.Map(document.getElementById('map'), {
				zoom: 7,
				center: castle,
				mapTypeId: 'hybrid'


			});
			var infowindow = new google.maps.InfoWindow();
			gon.fourteeners.forEach(function(fourteener){
				if (fourteener.surname == "Mount") {
					var full_name = fourteener.surname +" " +fourteener.name;
				} else if (fourteener.surname == "Peak"){
					var full_name = fourteener.name + " " +fourteener.surname;
				} else if (fourteener.surname == "Mount of the"){
					var full_name = fourteener.surname +" "+fourteener.name;
				} else if (fourteener.surname == "Mountain"){
					var full_name = fourteener.name +" " +fourteener.surname;
				} else if (fourteener.surname == "Needle"){
					var full_name = fourteener.name +" " +fourteener.surname;
				} else if (fourteener.surname == "Point"){
					var full_name = fourteener.name +" " +fourteener.surname;
				} else {
					var full_name = fourteener.name;
				}
				var marker = new google.maps.Marker({
					position: {lat: fourteener.location_lat, lng: fourteener.location_long},
					map: map,
					title: full_name,
					surname: fourteener.surname,
					elevation_in_feet: fourteener.elevation_in_feet,
					rank: fourteener.rank,
					location_lat: fourteener.location_lat,
					location_long: fourteener.location_long,
					forest: fourteener.forest,
					range: fourteener.range,
					classification: fourteener.classification,
					exposure: fourteener.exposure,
					elevation_gain_in_feet: fourteener.elevation_gain_in_feet,
					round_trip_distance_in_miles: fourteener.round_trip_distance_in_miles,
					no_4wd_additional_elevation_in_feet: fourteener.no_4wd_additional_elevation_in_feet,
					no_4wd_additional_distance_in_miles: fourteener.no_4wd_additional_distance_in_miles,
					route_name: fourteener.route_name,
					trailhead_name: fourteener.trailhead_name,
					trailhead_lat: fourteener.trailhead_lat,
					trailhead_long: fourteener.trailhead_long,
					four_x_four_required: fourteener.four_x_four_required,
					additional_info_url: fourteener.additional_info_url,
					kml: fourteener.kml
				});
				if (marker.classification < 2) {
					marker.setIcon('http://maps.google.com/mapfiles/ms/icons/green-dot.png');
				} else if (marker.classification < 3) {
					marker.setIcon('http://maps.google.com/mapfiles/ms/icons/blue-dot.png');
				} else if (marker.classification < 4) {
					marker.setIcon('http://maps.google.com/mapfiles/ms/icons/yellow-dot.png');
				} else  {
					marker.setIcon('http://maps.google.com/mapfiles/ms/icons/red-dot.png');
				}
				markers.push(marker); //add marker to array of markers
				var contentString = '<div id="content">'+
				  '<div id="siteNotice">'+
				  '</div>'+
				  '<h1 id="firstHeading" class="firstHeading">'+full_name+'</h1>'+
				  '<div id="bodyContent">'+
				  '<p>Elevation: '+marker.elevation_in_feet+' feet</br>'+
				  'Class: '+marker.classification+'</br>'+
				  'Range: '+marker.range+'</br>'+
				  'Forest: '+marker.forest+'</br>'+
				  'Route name: '+marker.route_name+'</br>'+
				  'Trailhead name: '+marker.trailhead_name+'</br>'+
				  'Round trip distance: '+marker.round_trip_distance_in_miles+' miles</br>'+
				  'Elevation gain: '+marker.elevation_gain_in_feet+' feet</br></p>'+
				  '<p><a href=\"'+marker.additional_info_url+'\">Click here for additional info</a></p>'+
				  '</div>'+
				  '</div>';
				marker.addListener('click', function() {
					map.setZoom(9);
				    map.setCenter(marker.getPosition());
					infowindow.setContent(contentString);
					infowindow.setPosition(marker.getPosition());
					infowindow.open(marker.get('map'), marker);
				});
				});
			}
			//add KML to database
			//jquery ajax 
			//change color or something based on class
			//change link to profile page not fourteeners page 
			//look into one infowindow closes when you open another
		</script>
		<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBBYkGDkbDQBSWK4WoQM-r8tA5WXkqu_Rw&callback=initMap">
		</script>

		<div id="sidebar">
			
			<h6 style="padding-left: 10px; text-align: center; color: white;"><i> Use sliders and check boxes to find the right peak for you.</i></h6>
	</div>
	</body>
</html>